{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: '/api',\n  withCredentials: true\n});\nexport const setAuthToken = token => {\n  if (token) {\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    localStorage.setItem('access_token', token);\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n    localStorage.removeItem('access_token');\n  }\n};\n\n// Load saved token\nconst saved = localStorage.getItem('access_token');\nif (saved) setAuthToken(saved);\nexport const login = async (username, password) => {\n  const res = await api.post('/auth/login/', {\n    username,\n    password\n  });\n  setAuthToken(res.data.access);\n  return res.data;\n};\nexport const getCurrentUser = async () => {\n  const res = await api.get('/auth/user/');\n  return res.data;\n};\nexport const listSignals = async () => {\n  const res = await api.get('/signals/');\n  return res.data;\n};\nexport const processSignal = async payload => {\n  const res = await api.post('/signals/process/', payload);\n  return res.data;\n};\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","withCredentials","setAuthToken","token","defaults","headers","common","localStorage","setItem","removeItem","saved","getItem","login","username","password","res","post","data","access","getCurrentUser","get","listSignals","processSignal","payload"],"sources":["/home/user/GitRepos/nordicHub/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\nexport type LoginResponse = {\n    access: string;\n    refresh: string;\n};\n\nexport type User = {\n    id: number;\n    username: string;\n    email: string;\n};\n\nconst api = axios.create({\n    baseURL: '/api',\n    withCredentials: true,\n});\n\nexport const setAuthToken = (token?: string) => {\n    if (token) {\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        localStorage.setItem('access_token', token);        \n    } else {\n        delete api.defaults.headers.common['Authorization'];\n        localStorage.removeItem('access_token');\n    }\n};\n\n// Load saved token\nconst saved = localStorage.getItem('access_token');\nif (saved) setAuthToken(saved);\n\nexport const login = async (username: string, password: string): Promise<LoginResponse> => {\n    const res = await api.post<LoginResponse>('/auth/login/', { username, password });\n    setAuthToken(res.data.access);\n    return res.data;\n};\n\nexport const getCurrentUser = async (): Promise<User> => {\n    const res = await api.get<User>('/auth/user/');\n    return res.data;\n};\n\nexport const listSignals = async () => {\n    const res = await api.get('/signals/');\n    return res.data as Array<{ id: number; name: string; sampling_rate: number; status: string }>;\n};\n\nexport const processSignal = async (payload: unknown) => {\n    const res = await api.post('/signals/process/', payload);\n    return res.data as { received: unknown; result: string };\n};\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAazB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACrBC,OAAO,EAAE,MAAM;EACfC,eAAe,EAAE;AACrB,CAAC,CAAC;AAEF,OAAO,MAAMC,YAAY,GAAIC,KAAc,IAAK;EAC5C,IAAIA,KAAK,EAAE;IACPL,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;IAChEI,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEL,KAAK,CAAC;EAC/C,CAAC,MAAM;IACH,OAAOL,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;IACnDC,YAAY,CAACE,UAAU,CAAC,cAAc,CAAC;EAC3C;AACJ,CAAC;;AAED;AACA,MAAMC,KAAK,GAAGH,YAAY,CAACI,OAAO,CAAC,cAAc,CAAC;AAClD,IAAID,KAAK,EAAER,YAAY,CAACQ,KAAK,CAAC;AAE9B,OAAO,MAAME,KAAK,GAAG,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAA6B;EACvF,MAAMC,GAAG,GAAG,MAAMjB,GAAG,CAACkB,IAAI,CAAgB,cAAc,EAAE;IAAEH,QAAQ;IAAEC;EAAS,CAAC,CAAC;EACjFZ,YAAY,CAACa,GAAG,CAACE,IAAI,CAACC,MAAM,CAAC;EAC7B,OAAOH,GAAG,CAACE,IAAI;AACnB,CAAC;AAED,OAAO,MAAME,cAAc,GAAG,MAAAA,CAAA,KAA2B;EACrD,MAAMJ,GAAG,GAAG,MAAMjB,GAAG,CAACsB,GAAG,CAAO,aAAa,CAAC;EAC9C,OAAOL,GAAG,CAACE,IAAI;AACnB,CAAC;AAED,OAAO,MAAMI,WAAW,GAAG,MAAAA,CAAA,KAAY;EACnC,MAAMN,GAAG,GAAG,MAAMjB,GAAG,CAACsB,GAAG,CAAC,WAAW,CAAC;EACtC,OAAOL,GAAG,CAACE,IAAI;AACnB,CAAC;AAED,OAAO,MAAMK,aAAa,GAAG,MAAOC,OAAgB,IAAK;EACrD,MAAMR,GAAG,GAAG,MAAMjB,GAAG,CAACkB,IAAI,CAAC,mBAAmB,EAAEO,OAAO,CAAC;EACxD,OAAOR,GAAG,CAACE,IAAI;AACnB,CAAC;AAED,eAAenB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}